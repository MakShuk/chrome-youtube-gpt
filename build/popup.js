(()=>{var e={7192:(e,t,r)=>{"use strict";r.d(t,{Z:()=>a});var n=r(8081),o=r.n(n),i=r(3645),s=r.n(i)()(o());s.push([e.id,"#extention-body{height:max-content;width:800px;background-color:#343541;display:flex;align-self:center;padding:20px;flex-direction:column}#extention-body div{color:#d9d9e3;text-align:center}#extention-body #extention-add-key{display:grid;grid-template-columns:80% 20%;gap:10px;margin-top:15px}#extention-body #extention-add-key span{background-color:#565869;border:0 solid #d9d9e3;color:#d9d9e3}#extention-body #extention-add-key button{height:35px;background-color:#238143;border:0 solid #d9d9e3;color:#d9d9e3;margin-top:1px}#extention-body #extention-add-key button:disabled{background-color:#565869}#extention-body #extention-add-key input{border:0 solid #d9d9e3}#extention-body .pagination-top,#extention-body .pagination-bottom{grid-column:1/span 2;height:40px;line-height:40px;text-align:center;-webkit-text-size-adjust:100%;font-feature-settings:normal;font-family:Söhne,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,Helvetica Neue,Arial,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;tab-size:4;color-scheme:dark;-webkit-font-smoothing:antialiased;font-size:.875rem;line-height:1.25rem;border:0 solid #d9d9e3;box-sizing:border-box;--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgba(69, 89, 164, 0.5);--tw-ring-offset-shadow: 0 0 transparent;--tw-ring-shadow: 0 0 transparent;--tw-shadow: 0 0 transparent;--tw-shadow-colored: 0 0 transparent;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;position:relative;display:flex;border-radius:.75rem;padding:.25rem;--tw-text-opacity: 1;color:rgba(32, 33, 35, var(--tw-text-opacity));--tw-bg-opacity: 1;background-color:rgba(32, 33, 35, var(--tw-bg-opacity))}#extention-body .pagination-top .enabled,#extention-body .pagination-bottom .enabled{-webkit-text-size-adjust:100%;tab-size:4;color:#fff;--gray-0: #fff;--gray-50: #f7f7f8;--gray-100: #ececf1;--gray-200: #d9d9e3;--gray-300: #c5c5d2;--gray-400: #acacbe;--gray-500: #8e8ea0;--gray-600: #565869;--gray-700: #40414f;--gray-800: #343541;--gray-900: #202123;--gray-950: #050509;--text-primary: var(--gray-100);--text-secondary: var(--gray-300);--text-tertiary: var(--gray-500);--surface-primary: var(--gray-900);--surface-secondary: var(--gray-800);--surface-tertiary: var(--gray-700);--border-light: var(--gray-700);--border-medium: var(--gray-600);--border-heavy: var(--gray-500);color-scheme:dark;-webkit-font-smoothing:antialiased;list-style:none;list-style-type:none;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;text-transform:none;cursor:pointer;border:0 solid #d9d9e3;box-sizing:border-box;--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgba(69, 89, 164, 0.5);--tw-ring-offset-shadow: 0 0 transparent;--tw-ring-shadow: 0 0 transparent;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;position:relative;display:flex;width:100%;align-items:center;justify-content:center;gap:.25rem;border-radius:.5rem;border-width:1px;padding-bottom:.75rem;padding-top:.75rem;box-shadow:var(--tw-ring-offset-shadow, 0 0 transparent),var(--tw-ring-shadow, 0 0 transparent),var(--tw-shadow);--tw-shadow: 0 1px 7px 0px rgba(0, 0, 0, 0.06);--tw-shadow-colored: 0 1px 7px 0px var(--tw-shadow-color);outline:2px solid rgba(0,0,0,0);outline-offset:2px;transition-property:opacity;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:.1s;--tw-border-opacity: 1;border-color:rgba(78, 79, 96, var(--tw-border-opacity));--tw-bg-opacity: 1;background-color:rgba(64, 65, 79, var(--tw-bg-opacity));--tw-text-opacity: 1}#extention-body .pagination-top .disabled,#extention-body .pagination-bottom .disabled{-webkit-text-size-adjust:100%;tab-size:4;--gray-0: #fff;--gray-50: #f7f7f8;--gray-100: #ececf1;--gray-200: #d9d9e3;--gray-300: #c5c5d2;--gray-400: #acacbe;--gray-500: #8e8ea0;--gray-600: #565869;--gray-700: #40414f;--gray-800: #343541;--gray-900: #202123;--gray-950: #050509;--text-primary: var(--gray-100);--text-secondary: var(--gray-300);--text-tertiary: var(--gray-500);--surface-primary: var(--gray-900);--surface-secondary: var(--gray-800);--surface-tertiary: var(--gray-700);--border-light: var(--gray-700);--border-medium: var(--gray-600);--border-heavy: var(--gray-500);color-scheme:dark;-webkit-font-smoothing:antialiased;--tw-bg-opacity: 1;list-style:none;list-style-type:none;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;text-transform:none;cursor:pointer;border:0 solid #d9d9e3;box-sizing:border-box;--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgba(69, 89, 164, 0.5);--tw-ring-offset-shadow: 0 0 transparent;--tw-ring-shadow: 0 0 transparent;--tw-shadow: 0 0 transparent;--tw-shadow-colored: 0 0 transparent;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;position:relative;display:flex;width:100%;align-items:center;justify-content:center;gap:.25rem;border-radius:.5rem;border-width:1px;border-color:rgba(0,0,0,0);padding-bottom:.75rem;padding-top:.75rem;--tw-text-opacity: 1;color:rgba(142, 142, 160, var(--tw-text-opacity));outline:2px solid rgba(0,0,0,0);outline-offset:2px;transition-property:opacity;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:.1s}#extention-body .content{display:grid}#extention-body .extention-textarea{height:400px;width:100%;margin-top:10px;grid-column:1/span 2;margin-bottom:10px;padding:10px;background-color:#444654;resize:none;font-feature-settings:normal;font-family:Söhne,ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,Noto Sans,sans-serif,Helvetica Neue,Arial,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-variation-settings:normal;tab-size:4;color-scheme:dark;line-height:inherit;border:0 solid #d9d9e3;box-sizing:border-box;position:relative;flex-grow:1;flex-direction:column;border-radius:.75rem;border-width:1px;padding-bottom:10px;padding-top:10px;border-color:rgba(32,33,35,.5)}#extention-body .start_message{display:grid;grid-template-columns:1fr 36px}#extention-body button:disabled{background-color:#ccc;color:#999;cursor:not-allowed;opacity:.5}#extention-body #extention-button,#extention-body .extention-button{tab-size:4;color-scheme:dark;border:0 solid #d9d9e3;box-sizing:border-box;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;margin:0;text-transform:none;background-image:none;cursor:pointer;bottom:.375rem;right:.5rem;border-radius:.375rem;padding:.25rem;--tw-text-opacity: 1;color:rgba(255, 255, 255, var(--tw-text-opacity));transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);--tw-bg-opacity: 1;background-color:#238143}#extention-body #extention-settings .header-settings{display:grid;grid-template-columns:740px 20px;border-bottom:1px solid #8e8ea0}#extention-body #extention-settings .header-settings h3{text-align:start}#extention-body #extention-settings .header-settings button{text-size-adjust:100%;tab-size:4;--gray-0: #fff;--gray-50: #f7f7f8;--gray-100: #ececf1;--gray-200: #d9d9e3;--gray-300: #c5c5d2;--gray-400: #acacbe;--gray-500: #8e8ea0;--gray-600: #565869;--gray-700: #40414f;--gray-800: #343541;--gray-900: #202123;--gray-950: #050509;--text-primary: var(--gray-100);--text-secondary: var(--gray-300);--text-tertiary: var(--gray-500);--surface-primary: var(--gray-900);--surface-secondary: var(--gray-800);--surface-tertiary: var(--gray-700);--border-light: var(--gray-700);--border-medium: var(--gray-600);--border-heavy: var(--gray-500);color-scheme:dark;--removed-body-scroll-bar-size: 0px;-webkit-font-smoothing:antialiased;--tw-bg-opacity: 1;pointer-events:auto;border:0 solid #d9d9e3;box-sizing:border-box;--tw-border-spacing-x: 0;--tw-border-spacing-y: 0;--tw-translate-x: 0;--tw-translate-y: 0;--tw-rotate: 0;--tw-skew-x: 0;--tw-skew-y: 0;--tw-scale-x: 1;--tw-scale-y: 1;--tw-pan-x: ;--tw-pan-y: ;--tw-pinch-zoom: ;--tw-scroll-snap-strictness: proximity;--tw-gradient-from-position: ;--tw-gradient-via-position: ;--tw-gradient-to-position: ;--tw-ordinal: ;--tw-slashed-zero: ;--tw-numeric-figure: ;--tw-numeric-spacing: ;--tw-numeric-fraction: ;--tw-ring-inset: ;--tw-ring-offset-width: 0px;--tw-ring-offset-color: #fff;--tw-ring-color: rgba(69, 89, 164, 0.5);--tw-ring-offset-shadow: 0 0 transparent;--tw-ring-shadow: 0 0 transparent;--tw-shadow: 0 0 transparent;--tw-shadow-colored: 0 0 transparent;--tw-blur: ;--tw-brightness: ;--tw-contrast: ;--tw-grayscale: ;--tw-hue-rotate: ;--tw-invert: ;--tw-saturate: ;--tw-sepia: ;--tw-drop-shadow: ;--tw-backdrop-blur: ;--tw-backdrop-brightness: ;--tw-backdrop-contrast: ;--tw-backdrop-grayscale: ;--tw-backdrop-hue-rotate: ;--tw-backdrop-invert: ;--tw-backdrop-opacity: ;--tw-backdrop-saturate: ;--tw-backdrop-sepia: ;font-family:inherit;font-size:100%;font-weight:inherit;line-height:inherit;margin:0;padding:0;text-transform:none;-webkit-appearance:button;background-color:rgba(0,0,0,0);background-image:none;cursor:pointer;transition-duration:.15s;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke,opacity,box-shadow,transform,filter,backdrop-filter,-webkit-transform,-webkit-filter,-webkit-backdrop-filter;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);--tw-text-opacity: 1;color:rgba(172, 172, 190, var(--tw-text-opacity))}#extention-body #extention-settings .settings-select-block{display:grid;grid-template-columns:1fr 1fr;gap:10px}#extention-body #extention-settings .settings-key-block{margin-top:15px}#extention-body #extention-settings h4{margin-top:10px;font-size:calc(.7rem + .6vw);margin-left:10px;text-align:start}#extention-body #extention-settings select,#extention-body #extention-settings .input-group>span,#extention-body #extention-settings .input-group>input{border:0 solid #d9d9e3}#extention-body #extention-settings span{background-color:#565869;color:#ececf1}#extention-body #extention-settings #context-textarea{height:100px;margin-top:1px;margin-bottom:15px;white-space:pre-wrap}#extention-body #extention-settings .button{background-color:#238143;color:#ececf1}#extention-body #extention-settings button:disabled{background-color:#565869;color:#999;cursor:not-allowed;opacity:.5}",""]);const a=s},3645:e=>{"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var r="",n=void 0!==t[5];return t[4]&&(r+="@supports (".concat(t[4],") {")),t[2]&&(r+="@media ".concat(t[2]," {")),n&&(r+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),r+=e(t),n&&(r+="}"),t[2]&&(r+="}"),t[4]&&(r+="}"),r})).join("")},t.i=function(e,r,n,o,i){"string"==typeof e&&(e=[[null,e,void 0]]);var s={};if(n)for(var a=0;a<this.length;a++){var c=this[a][0];null!=c&&(s[c]=!0)}for(var u=0;u<e.length;u++){var l=[].concat(e[u]);n&&s[l[0]]||(void 0!==i&&(void 0===l[5]||(l[1]="@layer".concat(l[5].length>0?" ".concat(l[5]):""," {").concat(l[1],"}")),l[5]=i),r&&(l[2]?(l[1]="@media ".concat(l[2]," {").concat(l[1],"}"),l[2]=r):l[2]=r),o&&(l[4]?(l[1]="@supports (".concat(l[4],") {").concat(l[1],"}"),l[4]=o):l[4]="".concat(o)),t.push(l))}},t}},8081:e=>{"use strict";e.exports=function(e){return e[1]}},4404:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>b});var n=r(3379),o=r.n(n),i=r(7795),s=r.n(i),a=r(569),c=r.n(a),u=r(3565),l=r.n(u),d=r(9216),p=r.n(d),g=r(4589),f=r.n(g),h=r(7192),y={};y.styleTagTransform=f(),y.setAttributes=l(),y.insert=c().bind(null,"head"),y.domAPI=s(),y.insertStyleElement=p(),o()(h.Z,y);const b=h.Z&&h.Z.locals?h.Z.locals:void 0},3379:e=>{"use strict";var t=[];function r(e){for(var r=-1,n=0;n<t.length;n++)if(t[n].identifier===e){r=n;break}return r}function n(e,n){for(var i={},s=[],a=0;a<e.length;a++){var c=e[a],u=n.base?c[0]+n.base:c[0],l=i[u]||0,d="".concat(u," ").concat(l);i[u]=l+1;var p=r(d),g={css:c[1],media:c[2],sourceMap:c[3],supports:c[4],layer:c[5]};if(-1!==p)t[p].references++,t[p].updater(g);else{var f=o(g,n);n.byIndex=a,t.splice(a,0,{identifier:d,updater:f,references:1})}s.push(d)}return s}function o(e,t){var r=t.domAPI(t);return r.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;r.update(e=t)}else r.remove()}}e.exports=function(e,o){var i=n(e=e||[],o=o||{});return function(e){e=e||[];for(var s=0;s<i.length;s++){var a=r(i[s]);t[a].references--}for(var c=n(e,o),u=0;u<i.length;u++){var l=r(i[u]);0===t[l].references&&(t[l].updater(),t.splice(l,1))}i=c}}},569:e=>{"use strict";var t={};e.exports=function(e,r){var n=function(e){if(void 0===t[e]){var r=document.querySelector(e);if(window.HTMLIFrameElement&&r instanceof window.HTMLIFrameElement)try{r=r.contentDocument.head}catch(e){r=null}t[e]=r}return t[e]}(e);if(!n)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");n.appendChild(r)}},9216:e=>{"use strict";e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},3565:(e,t,r)=>{"use strict";e.exports=function(e){var t=r.nc;t&&e.setAttribute("nonce",t)}},7795:e=>{"use strict";e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(r){!function(e,t,r){var n="";r.supports&&(n+="@supports (".concat(r.supports,") {")),r.media&&(n+="@media ".concat(r.media," {"));var o=void 0!==r.layer;o&&(n+="@layer".concat(r.layer.length>0?" ".concat(r.layer):""," {")),n+=r.css,o&&(n+="}"),r.media&&(n+="}"),r.supports&&(n+="}");var i=r.sourceMap;i&&"undefined"!=typeof btoa&&(n+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(i))))," */")),t.styleTagTransform(n,e,t.options)}(t,e,r)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},4589:e=>{"use strict";e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},2707:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addEventAnswerElement=t.addEventContentElement=t.addEventPaginationElement=void 0;const n=r(605),o=r(121),i=r(8771),s=r(7785);async function a(e){const t=document.querySelector(`textarea.extention-textarea.subtitles.area-${e}`),r=document.querySelector(`textarea.extention-textarea.answer.area-${e}`),o=new n.LocalStorageService("settings"),a=await o.load(),c=new i.OpenaiService(a.data.apiKey),u=[c.createAssistantMessage(`${a.data.promptContext}. Answer in ${a.data.responseLanguage}`)];u.push(c.createUserMessage(`${t?.textContent}`));const l=await c.streamResponse(u);if(l instanceof s.Stream)for await(const e of l){const t=e.choices[0]?.delta?.content||"";r&&(r.innerHTML+=t)}else r&&(r.textContent=l.content)}t.addEventPaginationElement=function(){const e=document.querySelectorAll(o.ExtentionSelector.paginationEl);e.forEach((t=>{t.addEventListener("click",(()=>{var r;e.forEach((e=>{e.classList.remove("enabled"),e.classList.add("disabled")})),r=t.getAttribute("key")||"1",document.querySelectorAll(o.ExtentionSelector.contentEl).forEach((e=>{e.style.display="none",e.getAttribute("key")===r&&(e.style.display="")})),t.classList.remove("disabled"),t.classList.add("enabled")}))}))},t.addEventContentElement=function(){document.querySelectorAll(o.ExtentionSelector.paginationTopСhild).forEach((e=>{e.addEventListener("click",(()=>{const t=e.getAttribute("response")||"false",r=e.getAttribute("group")||"group-1";var n;n=r,document.querySelectorAll(`.group-${n}`).forEach((e=>{e.classList.remove("enabled"),e.classList.add("disabled")}));const o=e.getAttribute("textarea")||"subtitles";e.classList.remove("disabled"),e.classList.add("enabled"),function(e,t){document.querySelectorAll(`.area-${e}`).forEach((e=>{e.style.display="none"})),document.querySelector(`textarea.extention-textarea.${t}.area-${e}`).style.display=""}(r,o),console.log(t),console.log("answer"===o),"answer"===o&&"received"!==t&&(console.log("Делаем запрос"),a(r),e.setAttribute("response","received"))}))}))},t.addEventAnswerElement=a},8427:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createPaginationElement=t.createContentElement=void 0,t.createContentElement=function(e){let t="";return e.forEach(((e,r)=>{t+=`\n    <div class="content" style="${0==r?"":"display: none;"}" key="${r+1}">\n      <div class="pagination-top">\n        <div class="pagination-top-child group-${r+1} enabled" group="${r+1}" textarea="subtitles">Запрос</div>\n        <div class="pagination-top-child group-${r+1} disabled" group="${r+1}" response="not received" textarea="answer">Ответ</div>  \n      </div>\n      <textarea class="extention-textarea subtitles area-${r+1}">${e}</textarea>\n\t  <textarea class="extention-textarea answer area-${r+1} " style="display: none;"></textarea>\n    </div>\n  `})),`<div class="main">${t}</div>`},t.createPaginationElement=function(e){if(e.length<=1)return null;let t="";return e.forEach(((e,r)=>{t+=`<div class="pagination-el ${0===r?"enabled":"disabled"}" key="${r+1}">${r+1}</div>\n  `})),` <div class="pagination-bottom">${t}</div>`}},8992:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.firstInitialization=void 0;const n=r(6316),o=r(121),i=r(1289);t.firstInitialization=async function(e){if((await e.load()).error){const t=51,r=new i.PageElementService(o.ExtentionSelector.addKeyArea),s=new i.PageElementService(o.ExtentionSelector.saveKey),a=new i.PageElementService(o.ExtentionSelector.firstAddKey),c=new i.PageElementService(o.ExtentionSelector.startMessage);return c.hide(!0),r.hide(!1),a.addEvent((()=>{var e=a.node.element?.value||"";e.length<t&&s.node.element&&(s.node.element.disabled=!0),e.length===t&&s.node.element&&(s.node.element.disabled=!1),e.length>t&&s.node.element&&(s.node.element.disabled=!0)}),i.EventType.Input),s.addEvent((()=>{var o=a.node.element?.value||"";if(o.length===t){const t={extensionLanguage:n.ExtensionLanguage.ENGLISH,apiKey:o,promptContext:"behave like a teacher who briefly explains the material, retell this information, in a businesslike tone",responseLanguage:n.ResponseLanguage.ENGLISH};e.save(t),r.hide(!0),c.hide(!1)}})),!1}return!0}},7219:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.buttonAction=void 0;const n=r(121),o=r(4258),i=r(5093),s=r(1289),a=r(8427),c=r(2707),u=r(5502);t.buttonAction=async function(){const e=new s.PageElementService(".start_message"),t=new s.PageElementService(n.ExtentionSelector.body);e.hide(!0);const r=await o.BackgroundSript.run(i.youTubeSubtitlesParser),l=(0,u.splitTextIntoChunks)(r.content,15e3),d=(0,a.createContentElement)(l),p=(0,a.createPaginationElement)(l);t.addHTML(d),p&&t.addHTML(p),(0,c.addEventPaginationElement)(),(0,c.addEventContentElement)()}},6389:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.settingsInit=void 0;const n=r(6316),o=r(121),i=r(1289),s=r(605),a=r(5320),c=r(8463);function u(e,t,r){const n=Object.values(r).filter((e=>e!==t)).map((e=>`<option>${e}</option>`)).join("");return`<option selected>${e} ${t}</option>\n\t ${n}`}function l(e){try{if(!e.node.element)throw new Error("get select error");const t=e.node.element,r=t.options[t.selectedIndex];if(!r)throw new Error("get select error");return{content:function(e){const t=e.split(" ");return(t[t.length-1]||"").replace(/[^\wа-яА-Я]/g,"")}(r.textContent||""),error:!1}}catch(e){return{content:`${e}`,error:!0}}}t.settingsInit=async function(){const e=new s.LocalStorageService("settings"),t=new i.PageElementService(o.ExtentionSelector.startMessage),r=new i.PageElementService(o.ExtentionSelector.settingsButtion),d=new i.PageElementService(o.ExtentionSelector.settingsArea),p=new i.PageElementService(o.ExtentionSelector.settingsClose),g=new i.PageElementService(o.ExtentionSelector.context),f=new i.PageElementService(o.ExtentionSelector.extensionLanguage),h=new i.PageElementService(o.ExtentionSelector.responseLanguage),y=new i.PageElementService(o.ExtentionSelector.setApiSettings),b=new i.PageElementService(o.ExtentionSelector.saveSettings);r.addEvent((async()=>{const r=await e.load();g.setTextContent(r.data.promptContext),f.addHTML(u("Extension language: ",r.data.extensionLanguage,n.ExtensionLanguage),!0),h.addHTML(u("Response language: ",r.data.responseLanguage,n.ResponseLanguage),!0),y.node.element&&(y.node.element.value=r.data.apiKey),t.hide(!0),d.hide(!1)})),p.addEvent((()=>{d.hide(!0),t.hide(!1)})),g.addEvent((()=>{b.node.element&&(b.node.element.disabled=!1)}),i.EventType.Input),f.addEvent((()=>{b.node.element&&(b.node.element.disabled=!1)}),i.EventType.Input),h.addEvent((()=>{b.node.element&&(b.node.element.disabled=!1)}),i.EventType.Input),y.addEvent((()=>{b.node.element&&(b.node.element.disabled=!1)}),i.EventType.Input),b.addEvent((async()=>{const r=function(e,t,r,n){const o=e.node.element?e.node.element.value:"",i=n.node.element?.value||"";console.log("context",o.trim());const s=l(t),a=l(r);return{promptContext:o.trim(),extensionLanguage:s.content,responseLanguage:a.content,apiKey:i.trim()}}(g,f,h,y);(0,c.applyTranslations)(a.translations,r.extensionLanguage),await async function(e,t){try{if(!(r=e)||null===r.promptContext||void 0===r.promptContext||""===r.promptContext.trim()||null===r.apiKey||void 0===r.apiKey||""===r.apiKey.trim()||null===r.extensionLanguage||void 0===r.extensionLanguage||""===r.extensionLanguage.trim()||null===r.responseLanguage||void 0===r.responseLanguage||""===r.responseLanguage.trim())throw new Error("Incorrect settings");const n=await t.save(e);if(n.error)throw new Error(n.content);return{content:n.content,error:!1}}catch(e){return{content:`Setup error: ${e}`,error:!0}}var r}(r,e),d.hide(!0),t.hide(!1)}))}},6316:(e,t)=>{"use strict";var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.ExtensionLanguage=t.ResponseLanguage=void 0,function(e){e.CHINESE_STANDARD="Chinese",e.SPANISH="Spanish",e.ENGLISH="English",e.HINDI="Hindi",e.ARABIC="Arabic",e.BENGALI="Bengali",e.PORTUGUESE="Portuguese",e.RUSSIAN="Russian",e.JAPANESE="Japanese",e.JAVANESE="Javanese",e.LAO="Lao",e.GERMAN="German",e.KOREAN="Korean",e.TURKISH="Turkish",e.VIETNAMESE="Vietnamese",e.FRENCH="French"}(r||(t.ResponseLanguage=r={})),function(e){e.RUSSIAN="Russian",e.ENGLISH="English"}(n||(t.ExtensionLanguage=n={}))},121:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.ExtentionSelector=void 0,function(e){e.pageError="#extention-page-error",e.button="#extention-button",e.pageState="#extention-page-state",e.info="#extention-page-info",e.body="#extention-body",e.paginationTop=".pagination-top",e.paginationBottom=".pagination-bottom",e.paginationEl=".pagination-el",e.contentEl=".content",e["paginationTopСhild"]=".pagination-top-child",e.settingsButtion="#extention-settings-button",e.settingsArea="#extention-settings",e.startMessage=".start_message",e.settingsClose="#extention-settings-close",e.context="#context-textarea",e.saveKey="#save-key",e.firstAddKey="#first-add-key",e.addKeyArea="#extention-add-key",e.extensionLanguage="#extensionLanguage",e.responseLanguage="#responseLanguage",e.setApiSettings="#setApiSettings",e.saveSettings="#save-settings"}(r||(t.ExtentionSelector=r={}))},5320:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.translations=void 0,t.translations={russian:{"extention-page-state":"Ожидание загрузки страницы","extention-page-error":"Расширение работает только на Youtube.com","extention-page-info":"Ожидание загрузки субтитров","extention-button":"Получить субтитры","setting-title":"Настройки","context-title":"Контекст","save-settings":"Сохрнить настройки"},english:{"extension-page-state":"Waiting for page to load","extension-page-error":"The extension only works on Youtube.com","extension-page-info":"Waiting for subtitles to load","extension-button":"Get subtitles","setting-title":"Settings","context-title":"Context","save-settings":"Save settings"}}},8463:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyTranslations=void 0;const n=r(6316);t.applyTranslations=function(e,t){if(t===n.ExtensionLanguage.ENGLISH)return null;const r=e.russian;for(const e in r){const t=document.getElementById(e);t&&(t.textContent=r[e]||"")}return null}},8858:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSubYouTube=void 0,t.getSubYouTube=async function(){try{const e="#segments-container > ytd-transcript-segment-renderer";let t=document.querySelectorAll(e);if(t.length>0)return{error:!1,content:"Элемент присуствует"};const r="#description-inner",n=document.querySelector(r);if(!n)throw new Error(`Элемент не найден, проверте селектор ${r}`);n?.click();const o="#primary-button > ytd-button-renderer > yt-button-shape > button > yt-touch-feedback-shape > div > div.yt-spec-touch-feedback-shape__fill";let i=document.querySelector(o);for(;!i;)await new Promise((e=>setTimeout(e,100))),i=document.querySelector(o);for(i?.click();t.length<=0;)await new Promise((e=>setTimeout(e,100))),t=document.querySelectorAll(e);return{error:!1,content:"Субитры отоборажены на странице"}}catch(e){return{error:!0,content:`Субитры отоборажения субтитров на странице: ${e}`}}}},6784:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isYouTubePage=void 0;const n=r(4258);t.isYouTubePage=async function(){return await n.BackgroundSript.run((function(){return window.location.href.includes("youtube.com")}),"")}},4258:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BackgroundSript=void 0,t.BackgroundSript=class{static async run(e,t){const[r]=await chrome.tabs.query({active:!0,currentWindow:!0});if("number"==typeof r?.id){const n=await chrome.scripting.executeScript({target:{tabId:r.id},func:e,args:t||[]}),o=n[0]?.result;return o}}}},5502:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.splitTextIntoChunks=void 0,t.splitTextIntoChunks=function(e,t){const r=[];let n=0;for(;n<e.length;){const o=e.substring(n,n+t),i=o.lastIndexOf(" ");if(o.length<300){console.log(o),r[r.length-1]=`${r[r.length-1]} ${o}`;break}-1!==i?(r.push(o.substring(0,i)),n+=i+1):(r.push(o),n+=t)}return r}},5093:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.youTubeSubtitlesParser=void 0,t.youTubeSubtitlesParser=function(){try{const e="#segments-container > ytd-transcript-segment-renderer",t="yt-formatted-string",r=document.querySelectorAll(e);if(0===r.length)throw new Error(`nodes.length === 0, проверьте раздел субдитров, проверте селектор ${e}`);let n="";if(r.forEach((e=>{const r=e.querySelector(t)?.textContent||"";n+=r})),0===n.length)throw new Error(`text.length === 0 проверьте селектор ${t}`);const o=document.querySelector("#guide-wrapper");return o&&o.click(),{error:!1,content:n}}catch(e){return{error:!0,content:`Ошибка парсинга субтитров ${e}`}}}},8771:function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.OpenaiService=void 0;const o=n(r(9590));t.OpenaiService=class{constructor(e){this.openai=new o.default({apiKey:e,dangerouslyAllowBrowser:!0})}async response(e){try{const t=await this.openai.chat.completions.create({messages:e,model:"gpt-3.5-turbo-16k",temperature:.5});if(!t.choices[0]?.message)throw new Error("openai.chat.completions is undefined");const r=t.choices[0]?.message.content,n=t.choices[0]?.message.role;if(null===r)throw new Error("message.content is null");return{role:n,content:r,error:!1}}catch(e){if(e instanceof o.default.APIError){const{status:t,message:r,code:n,type:o}=e,i=`status: ${t} message: ${r} code: ${n} type: ${o}`;return console.error(i),{role:"assistant",content:i,error:!0}}return{role:"assistant",content:`Non-API error, ${e}`,error:!0}}}async streamResponse(e){try{return await this.openai.chat.completions.create({model:"gpt-3.5-turbo-16k",messages:e,stream:!0})}catch(e){if(e instanceof o.default.APIError){const{status:t,message:r,code:n,type:o}=e,i=`status: ${t} message: ${r} code: ${n} type: ${o}`;return console.error(i),{role:"assistant",content:i,error:!0}}return{role:"assistant",content:`Non-API error, ${e}`,error:!0}}}async transcriptionAudio(e){try{return{role:"assistant",content:(await this.openai.audio.transcriptions.create({model:"whisper-1",file:e})).text}}catch(e){if(e instanceof o.default.APIError){const{status:t,message:r,code:n,type:o}=e,i=`status: ${t} message: ${r} code: ${n} type: ${o}`;return console.error(i),{role:"assistant",content:i,error:!0}}return{role:"assistant",content:`Non-API error, ${e}`,error:!0}}}createUserMessage(e){return{role:"user",content:e}}createAssistantMessage(e){return{role:"assistant",content:e}}}},1289:(e,t)=>{"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),t.PageElementService=t.EventType=void 0,function(e){e.Click="click",e.MouseOver="focus",e.Input="input"}(r||(t.EventType=r={})),t.PageElementService=class{constructor(e){this.selector=e,this.getElement=()=>{try{const e=document.querySelector(this.selector);if(e)return{element:e,content:"Элемент получен",error:!1};throw new Error(`Элемент ${this.selector}не найден`)}catch(e){return{error:!0,content:`Ошибка: ${e}`}}},this.getTextContent=()=>{try{if(this.node.error)throw new Error(this.node.content);let e="";return this.node.element&&this.node.element.textContent&&(e=this.node.element.textContent),{error:!1,content:e}}catch(e){return{error:!0,content:`Ошибка: ${e}`}}},this.node=this.getElement()}setTextContent(e){try{if(this.node.error&&!this.node.element)throw new Error(this.node.content);if(!this.node.element)throw new Error(this.node.content);return this.node.element.textContent=String(e),{error:!1,content:`Значение: ${e} - записано`}}catch(e){return{error:!0,content:`Ошибка: ${e}`}}}addEvent(e,t){try{if(this.node.error)throw new Error(this.node.content);if(!this.node.element)throw new Error(this.node.content);return this.node.element.addEventListener(t||"click",(()=>{e()})),{error:!1,content:"Событие добалено"}}catch(e){return{error:!0,content:`Ошибка: ${e}`}}}hide(e){try{if(this.node.error)throw new Error(this.node.content);if(!this.node.element)throw new Error(this.node.content);const t=e?"none":"";return this.node.element.style.display=t,{error:!1,content:`Элемент срыт: ${e}`}}catch(e){return{error:!0,content:`Ошибка: ${e}`}}}addHTML(e,t){try{if(this.node.error)throw new Error(this.node.content);if(!this.node.element)throw new Error(this.node.content);return t||(this.node.element.innerHTML+=e),t&&(this.node.element.innerHTML=e),{error:!1,content:`Добавлен HTML: ${e.slice(0,10)}...`}}catch(e){return{error:!0,content:`Ошибка: ${e}`}}}}},605:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LocalStorageService=void 0,t.LocalStorageService=class{constructor(e){this.key=e}async save(e){try{if(0===e.length)throw new Error(`Не верный ключ: ${this.key}`);const t=JSON.stringify(e);return await new Promise((e=>{window.localStorage.setItem(this.key,t),e()})),{content:`Данные успешно сохранены в localStorage под ключом "${this.key}".`,error:!1}}catch(e){return{content:`Ошибка создания данных в localStorage под ключом ${this.key}: ${e}`,error:!0}}}async load(){try{const e=await new Promise((e=>{const t=window.localStorage.getItem(this.key);if(!t)throw new Error(`Сохраненных данных под ключом ${this.key} нет`);e(JSON.parse(t))}));return{content:`Полученны данные под ключом ${this.key}`,error:!1,data:e}}catch(e){return{content:`Ошибка получения данных в localStorage под ключом ${this.key}: ${e}`,error:!0}}}}},1386:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDefaultAgent=void 0,t.getDefaultAgent=e=>{}},5310:(e,t)=>{t.fetch=fetch.bind(void 0),t.Request=Request,t.Response=Response,t.Headers=Headers,t.isPolyfilled=!1},9948:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fileFromPath=void 0,t.fileFromPath=async function(){throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/openai/openai-node#file-uploads")}},4273:(e,t)=>{t.FormData=FormData,t.Blob=Blob,t.File="undefined"!=typeof File?File:class extends Blob{constructor(){throw new Error("file uploads aren't supported in this environment yet as 'File' is not defined")}},t.isPolyfilled=!1},4169:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getMultipartRequestOptions=void 0;const n=r(3780);t.getMultipartRequestOptions=async function(e,t){return{...t,body:new n.MultipartBody(e)}}},5905:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFsReadStream=void 0,t.isFsReadStream=function(e){return!1}},4610:function(e,t,r){"use strict";var n,o=this&&this.__classPrivateFieldSet||function(e,t,r,n,o){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!o)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!o:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?o.call(e,r):o?o.value=r:t.set(e,r),r},i=this&&this.__classPrivateFieldGet||function(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)};Object.defineProperty(t,"__esModule",{value:!0}),t.toBase64=t.getHeader=t.isHeadersProtocol=t.isRunningInBrowser=t.debug=t.hasOwn=t.isEmptyObj=t.maybeCoerceBoolean=t.maybeCoerceFloat=t.maybeCoerceInteger=t.coerceBoolean=t.coerceFloat=t.coerceInteger=t.readEnv=t.ensurePresent=t.castToError=t.safeJSON=t.isRequestOptions=t.createResponseHeaders=t.PagePromise=t.AbstractPage=t.APIResource=t.APIClient=t.APIPromise=t.createForm=t.multipartFormRequestOptions=t.maybeMultipartFormRequestOptions=void 0;const s=r(3282),a=r(7785),c=r(6356),u=r(1386),l=r(5310),d=r(3780);var p=r(3780);async function g(e){const{response:t}=e;if(e.options.stream)return new a.Stream(t,e.controller);const r=t.headers.get("content-type");if(null==r?void 0:r.includes("application/json")){const e=await t.json();return k("response",t.status,t.url,t.headers,e),e}const n=await t.text();return k("response",t.status,t.url,t.headers,n),n}Object.defineProperty(t,"maybeMultipartFormRequestOptions",{enumerable:!0,get:function(){return p.maybeMultipartFormRequestOptions}}),Object.defineProperty(t,"multipartFormRequestOptions",{enumerable:!0,get:function(){return p.multipartFormRequestOptions}}),Object.defineProperty(t,"createForm",{enumerable:!0,get:function(){return p.createForm}});class f extends Promise{constructor(e,t=g){super((e=>{e(null)})),this.responsePromise=e,this.parseResponse=t}_thenUnwrap(e){return new f(this.responsePromise,(async t=>e(await this.parseResponse(t))))}asResponse(){return this.responsePromise.then((e=>e.response))}async withResponse(){const[e,t]=await Promise.all([this.parse(),this.asResponse()]);return{data:e,response:t}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(this.parseResponse)),this.parsedPromise}then(e,t){return this.parse().then(e,t)}catch(e){return this.parse().catch(e)}finally(e){return this.parse().finally(e)}}t.APIPromise=f,t.APIClient=class{constructor({baseURL:e,maxRetries:t,timeout:r=6e5,httpAgent:n,fetch:o}){this.baseURL=e,this.maxRetries=A("maxRetries",null!=t?t:2),this.timeout=A("timeout",r),this.httpAgent=n,this.fetch=null!=o?o:l.fetch}authHeaders(e){return{}}defaultHeaders(e){return{Accept:"application/json","Content-Type":"application/json","User-Agent":this.getUserAgent(),...x(),...this.authHeaders(e)}}validateHeaders(e,t){}defaultIdempotencyKey(){return`stainless-node-retry-${R()}`}get(e,t){return this.methodRequest("get",e,t)}post(e,t){return this.methodRequest("post",e,t)}patch(e,t){return this.methodRequest("patch",e,t)}put(e,t){return this.methodRequest("put",e,t)}delete(e,t){return this.methodRequest("delete",e,t)}methodRequest(e,t,r){return this.request(Promise.resolve(r).then((r=>({method:e,path:t,...r}))))}getAPIList(e,t,r){return this.requestAPIList(t,{method:"get",path:e,...r})}calculateContentLength(e){if("string"==typeof e){if("undefined"!=typeof Buffer)return Buffer.byteLength(e,"utf8").toString();if("undefined"!=typeof TextEncoder)return(new TextEncoder).encode(e).length.toString()}return null}buildRequest(e){var t,r,n,o,i,s;const{method:a,path:c,query:p,headers:g={}}=e,f=(0,d.isMultipartBody)(e.body)?e.body.body:e.body?JSON.stringify(e.body,null,2):null,h=this.calculateContentLength(f),y=this.buildURL(c,p);"timeout"in e&&A("timeout",e.timeout);const b=null!==(t=e.timeout)&&void 0!==t?t:this.timeout,m=null!==(n=null!==(r=e.httpAgent)&&void 0!==r?r:this.httpAgent)&&void 0!==n?n:(0,u.getDefaultAgent)(y),w=b+1e3;"number"==typeof(null===(o=null==m?void 0:m.options)||void 0===o?void 0:o.timeout)&&w>(null!==(i=m.options.timeout)&&void 0!==i?i:0)&&(m.options.timeout=w),this.idempotencyHeader&&"get"!==a&&(e.idempotencyKey||(e.idempotencyKey=this.defaultIdempotencyKey()),g[this.idempotencyHeader]=e.idempotencyKey);const v={...h&&{"Content-Length":h},...this.defaultHeaders(e),...g};(0,d.isMultipartBody)(e.body)&&!l.isPolyfilled&&delete v["Content-Type"],Object.keys(v).forEach((e=>null===v[e]&&delete v[e]));const x={method:a,...f&&{body:f},headers:v,...m&&{agent:m},signal:null!==(s=e.signal)&&void 0!==s?s:null};return this.validateHeaders(v,g),{req:x,url:y,timeout:b}}async prepareRequest(e,{url:t,options:r}){}parseHeaders(e){return e?Symbol.iterator in e?Object.fromEntries(Array.from(e).map((e=>[...e]))):{...e}:{}}makeStatusError(e,t,r,n){return c.APIError.generate(e,t,r,n)}request(e,t=null){return new f(this.makeRequest(e,t))}async makeRequest(e,r){var n,o,i;const s=await e;null==r&&(r=null!==(n=s.maxRetries)&&void 0!==n?n:this.maxRetries);const{req:a,url:u,timeout:l}=this.buildRequest(s);if(await this.prepareRequest(a,{url:u,options:s}),k("request",u,s,a.headers),null===(o=s.signal)||void 0===o?void 0:o.aborted)throw new c.APIUserAbortError;const d=new AbortController,p=await this.fetchWithTimeout(u,a,l,d).catch(t.castToError);if(p instanceof Error){if(null===(i=s.signal)||void 0===i?void 0:i.aborted)throw new c.APIUserAbortError;if(r)return this.retryRequest(s,r);if("AbortError"===p.name)throw new c.APIConnectionTimeoutError;throw new c.APIConnectionError({cause:p})}const g=(0,t.createResponseHeaders)(p.headers);if(!p.ok){if(r&&this.shouldRetry(p))return this.retryRequest(s,r,g);const e=await p.text().catch((()=>"Unknown")),n=(0,t.safeJSON)(e),o=n?void 0:e;throw k("response",p.status,u,g,o),this.makeStatusError(p.status,n,o,g)}return{response:p,options:s,controller:d}}requestAPIList(e,t){const r=this.makeRequest(t,null);return new y(this,r,e)}buildURL(e,t){const r=P(e)?new URL(e):new URL(this.baseURL+(this.baseURL.endsWith("/")&&e.startsWith("/")?e.slice(1):e)),n=this.defaultQuery();return O(n)||(t={...n,...t}),t&&(r.search=this.stringifyQuery(t)),r.toString()}stringifyQuery(e){return Object.entries(e).filter((([e,t])=>void 0!==t)).map((([e,t])=>{if("string"==typeof t||"number"==typeof t||"boolean"==typeof t)return`${encodeURIComponent(e)}=${encodeURIComponent(t)}`;if(null===t)return`${encodeURIComponent(e)}=`;throw new Error(`Cannot stringify type ${typeof t}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)})).join("&")}async fetchWithTimeout(e,t,r,n){const{signal:o,...i}=t||{};o&&o.addEventListener("abort",(()=>n.abort()));const s=setTimeout((()=>n.abort()),r);return this.getRequestClient().fetch(e,{signal:n.signal,...i}).finally((()=>{clearTimeout(s)}))}getRequestClient(){return{fetch:this.fetch}}shouldRetry(e){const t=e.headers.get("x-should-retry");return"true"===t||"false"!==t&&(409===e.status||429===e.status||e.status>=500)}async retryRequest(e,t,r){var n;t-=1;const o=parseInt((null==r?void 0:r["retry-after"])||""),i=null!==(n=e.maxRetries)&&void 0!==n?n:this.maxRetries,s=1e3*this.calculateRetryTimeoutSeconds(t,o,i);return await S(s),this.makeRequest(e,t)}calculateRetryTimeoutSeconds(e,t,r){if(Number.isInteger(t)&&t<=60)return t;const n=r-e;return Math.min(.5*Math.pow(n-1,2),2)+(Math.random()-.5)}getUserAgent(){return`${this.constructor.name}/JS ${s.VERSION}`}},t.APIResource=class{constructor(e){this.client=e,this.get=e.get.bind(e),this.post=e.post.bind(e),this.patch=e.patch.bind(e),this.put=e.put.bind(e),this.delete=e.delete.bind(e),this.getAPIList=e.getAPIList.bind(e)}};class h{constructor(e,t,r,i){n.set(this,void 0),o(this,n,e,"f"),this.options=i,this.response=t,this.body=r}hasNextPage(){return!!this.getPaginatedItems().length&&null!=this.nextPageInfo()}async getNextPage(){const e=this.nextPageInfo();if(!e)throw new Error("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");const t={...this.options};if("params"in e)t.query={...t.query,...e.params};else if("url"in e){const r=[...Object.entries(t.query||{}),...e.url.searchParams.entries()];for(const[t,n]of r)e.url.searchParams.set(t,n);t.query=void 0,t.path=e.url.toString()}return await i(this,n,"f").requestAPIList(this.constructor,t)}async*iterPages(){let e=this;for(yield e;e.hasNextPage();)e=await e.getNextPage(),yield e}async*[(n=new WeakMap,Symbol.asyncIterator)](){for await(const e of this.iterPages())for(const t of e.getPaginatedItems())yield t}}t.AbstractPage=h;class y extends f{constructor(e,t,r){super(t,(async t=>new r(e,t.response,await g(t),t.options)))}async*[Symbol.asyncIterator](){const e=await(this);for await(const t of e)yield t}}t.PagePromise=y,t.createResponseHeaders=e=>new Proxy(Object.fromEntries(e.entries()),{get(e,t){const r=t.toString();return e[r.toLowerCase()]||e[r]}});const b={method:!0,path:!0,query:!0,body:!0,headers:!0,maxRetries:!0,stream:!0,timeout:!0,httpAgent:!0,signal:!0,idempotencyKey:!0};t.isRequestOptions=e=>"object"==typeof e&&null!==e&&!O(e)&&Object.keys(e).every((e=>I(b,e)));const m=e=>"x32"===e?"x32":"x86_64"===e||"x64"===e?"x64":"arm"===e?"arm":"aarch64"===e||"arm64"===e?"arm64":e?`other:${e}`:"unknown",w=e=>(e=e.toLowerCase()).includes("ios")?"iOS":"android"===e?"Android":"darwin"===e?"MacOS":"win32"===e?"Windows":"freebsd"===e?"FreeBSD":"openbsd"===e?"OpenBSD":"linux"===e?"Linux":e?`Other:${e}`:"Unknown";let v;const x=()=>null!=v?v:v=(()=>{if("undefined"!=typeof Deno&&null!=Deno.build)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":s.VERSION,"X-Stainless-OS":w(Deno.build.os),"X-Stainless-Arch":m(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":Deno.version};if("undefined"!=typeof EdgeRuntime)return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":s.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":process.version};if("[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0))return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":s.VERSION,"X-Stainless-OS":w(process.platform),"X-Stainless-Arch":m(process.arch),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":process.version};const e=function(){if("undefined"==typeof navigator||!navigator)return null;const e=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:t,pattern:r}of e){const e=r.exec(navigator.userAgent);if(e)return{browser:t,version:`${e[1]||0}.${e[2]||0}.${e[3]||0}`}}return null}();return e?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":s.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${e.browser}`,"X-Stainless-Runtime-Version":e.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":s.VERSION,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}})();t.safeJSON=e=>{try{return JSON.parse(e)}catch(e){return}};const E=new RegExp("^(?:[a-z]+:)?//","i"),P=e=>E.test(e),S=e=>new Promise((t=>setTimeout(t,e))),A=(e,t)=>{if("number"!=typeof t||!Number.isInteger(t))throw new Error(`${e} must be an integer`);if(t<0)throw new Error(`${e} must be a positive integer`);return t};function O(e){if(!e)return!0;for(const t in e)return!1;return!0}function I(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function k(e,...t){"undefined"!=typeof process&&"true"===process.env.DEBUG&&console.log(`OpenAI:DEBUG:${e}`,...t)}t.castToError=e=>e instanceof Error?e:new Error(e),t.ensurePresent=e=>{if(null==e)throw new Error(`Expected a value to be given but received ${e} instead.`);return e},t.readEnv=e=>{var t,r,n,o;return"undefined"!=typeof process?null!==(r=null===(t=process.env)||void 0===t?void 0:t[e])&&void 0!==r?r:void 0:"undefined"!=typeof Deno?null===(o=null===(n=Deno.env)||void 0===n?void 0:n.get)||void 0===o?void 0:o.call(n,e):void 0},t.coerceInteger=e=>{if("number"==typeof e)return Math.round(e);if("string"==typeof e)return parseInt(e,10);throw new Error(`Could not coerce ${e} (type: ${typeof e}) into a number`)},t.coerceFloat=e=>{if("number"==typeof e)return e;if("string"==typeof e)return parseFloat(e);throw new Error(`Could not coerce ${e} (type: ${typeof e}) into a number`)},t.coerceBoolean=e=>"boolean"==typeof e?e:"string"==typeof e?"true"===e:Boolean(e),t.maybeCoerceInteger=e=>{if(void 0!==e)return(0,t.coerceInteger)(e)},t.maybeCoerceFloat=e=>{if(void 0!==e)return(0,t.coerceFloat)(e)},t.maybeCoerceBoolean=e=>{if(void 0!==e)return(0,t.coerceBoolean)(e)},t.isEmptyObj=O,t.hasOwn=I,t.debug=k;const R=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(e=>{const t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}));t.isRunningInBrowser=()=>"undefined"!=typeof window&&void 0!==window.document&&"undefined"!=typeof navigator,t.isHeadersProtocol=e=>"function"==typeof(null==e?void 0:e.get),t.getHeader=(e,r)=>{const n=r.toLowerCase();if((0,t.isHeadersProtocol)(e))return e.get(r)||e.get(n);const o=e[r]||e[n];return Array.isArray(o)?(o.length<=1||console.warn(`Received ${o.length} entries for the ${r} header, using the first entry.`),o[0]):o},t.toBase64=e=>{if(!e)return"";if("undefined"!=typeof Buffer)return Buffer.from(e).toString("base64");if("undefined"!=typeof btoa)return btoa(e);throw new Error("Cannot generate b64 string; Expected `Buffer` or `btoa` to be defined")}},6356:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.InternalServerError=t.RateLimitError=t.UnprocessableEntityError=t.ConflictError=t.NotFoundError=t.PermissionDeniedError=t.AuthenticationError=t.BadRequestError=t.APIConnectionTimeoutError=t.APIConnectionError=t.APIUserAbortError=t.APIError=void 0;const n=r(4610);class o extends Error{constructor(e,t,r,n){super(o.makeMessage(t,r)),this.status=e,this.headers=n;const i=t;this.error=i,this.code=null==i?void 0:i.code,this.param=null==i?void 0:i.param,this.type=null==i?void 0:i.type}static makeMessage(e,t){return(null==e?void 0:e.message)?"string"==typeof e.message?e.message:JSON.stringify(e.message):e?JSON.stringify(e):t||"Unknown error occurred"}static generate(e,t,r,f){if(!e)return new i({cause:(0,n.castToError)(t)});const h=null==t?void 0:t.error;return 400===e?new s(e,h,r,f):401===e?new a(e,h,r,f):403===e?new c(e,h,r,f):404===e?new u(e,h,r,f):409===e?new l(e,h,r,f):422===e?new d(e,h,r,f):429===e?new p(e,h,r,f):e>=500?new g(e,h,r,f):new o(e,h,r,f)}}t.APIError=o,t.APIUserAbortError=class extends o{constructor({message:e}={}){super(void 0,void 0,e||"Request was aborted.",void 0),this.status=void 0}};class i extends o{constructor({message:e,cause:t}){super(void 0,void 0,e||"Connection error.",void 0),this.status=void 0,t&&(this.cause=t)}}t.APIConnectionError=i,t.APIConnectionTimeoutError=class extends i{constructor(){super({message:"Request timed out."})}};class s extends o{constructor(){super(...arguments),this.status=400}}t.BadRequestError=s;class a extends o{constructor(){super(...arguments),this.status=401}}t.AuthenticationError=a;class c extends o{constructor(){super(...arguments),this.status=403}}t.PermissionDeniedError=c;class u extends o{constructor(){super(...arguments),this.status=404}}t.NotFoundError=u;class l extends o{constructor(){super(...arguments),this.status=409}}t.ConflictError=l;class d extends o{constructor(){super(...arguments),this.status=422}}t.UnprocessableEntityError=d;class p extends o{constructor(){super(...arguments),this.status=429}}t.RateLimitError=p;class g extends o{}t.InternalServerError=g},9590:function(e,t,r){"use strict";var n,o=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),s=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&o(t,e,r);return i(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.fileFromPath=t.toFile=t.UnprocessableEntityError=t.PermissionDeniedError=t.InternalServerError=t.AuthenticationError=t.BadRequestError=t.RateLimitError=t.ConflictError=t.NotFoundError=t.APIUserAbortError=t.APIConnectionTimeoutError=t.APIConnectionError=t.APIError=t.OpenAI=void 0;const a=s(r(4610)),c=s(r(7866)),u=s(r(1739)),l=s(r(6356)),d=s(r(3780));class p extends a.APIClient{constructor(e){var t,r,{apiKey:n=a.readEnv("OPENAI_API_KEY"),organization:o=(null!==(t=a.readEnv("OPENAI_ORG_ID"))&&void 0!==t?t:null),...i}=void 0===e?{}:e;if(void 0===n)throw new Error("The OPENAI_API_KEY environment variable is missing or empty; either provide it, or instantiate the OpenAI client with an apiKey option, like new OpenAI({ apiKey: 'my apiKey' }).");const s={apiKey:n,organization:o,baseURL:"https://api.openai.com/v1",...i};if(!s.dangerouslyAllowBrowser&&a.isRunningInBrowser())throw new Error("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew OpenAI({ apiKey, dangerouslyAllowBrowser: true });\n\nhttps://help.openai.com/en/articles/5112595-best-practices-for-api-key-safety\n");super({baseURL:s.baseURL,timeout:null!==(r=s.timeout)&&void 0!==r?r:6e5,httpAgent:s.httpAgent,maxRetries:s.maxRetries,fetch:s.fetch}),this.completions=new u.Completions(this),this.chat=new u.Chat(this),this.edits=new u.Edits(this),this.embeddings=new u.Embeddings(this),this.files=new u.Files(this),this.images=new u.Images(this),this.audio=new u.Audio(this),this.moderations=new u.Moderations(this),this.models=new u.Models(this),this.fineTuning=new u.FineTuning(this),this.fineTunes=new u.FineTunes(this),this._options=s,this.apiKey=n,this.organization=o}defaultQuery(){return this._options.defaultQuery}defaultHeaders(e){return{...super.defaultHeaders(e),"OpenAI-Organization":this.organization,...this._options.defaultHeaders}}authHeaders(e){return{Authorization:`Bearer ${this.apiKey}`}}}t.OpenAI=p,n=p,p.OpenAI=n,p.APIError=l.APIError,p.APIConnectionError=l.APIConnectionError,p.APIConnectionTimeoutError=l.APIConnectionTimeoutError,p.APIUserAbortError=l.APIUserAbortError,p.NotFoundError=l.NotFoundError,p.ConflictError=l.ConflictError,p.RateLimitError=l.RateLimitError,p.BadRequestError=l.BadRequestError,p.AuthenticationError=l.AuthenticationError,p.InternalServerError=l.InternalServerError,p.PermissionDeniedError=l.PermissionDeniedError,p.UnprocessableEntityError=l.UnprocessableEntityError,t.APIError=l.APIError,t.APIConnectionError=l.APIConnectionError,t.APIConnectionTimeoutError=l.APIConnectionTimeoutError,t.APIUserAbortError=l.APIUserAbortError,t.NotFoundError=l.NotFoundError,t.ConflictError=l.ConflictError,t.RateLimitError=l.RateLimitError,t.BadRequestError=l.BadRequestError,t.AuthenticationError=l.AuthenticationError,t.InternalServerError=l.InternalServerError,t.PermissionDeniedError=l.PermissionDeniedError,t.UnprocessableEntityError=l.UnprocessableEntityError,t.toFile=d.toFile,t.fileFromPath=d.fileFromPath,function(e){e.toFile=d.toFile,e.fileFromPath=d.fileFromPath,e.Page=c.Page,e.CursorPage=c.CursorPage,e.Completions=u.Completions,e.Chat=u.Chat,e.Edits=u.Edits,e.Embeddings=u.Embeddings,e.Files=u.Files,e.FileObjectsPage=u.FileObjectsPage,e.Images=u.Images,e.Audio=u.Audio,e.Moderations=u.Moderations,e.Models=u.Models,e.ModelsPage=u.ModelsPage,e.FineTuning=u.FineTuning,e.FineTunes=u.FineTunes,e.FineTunesPage=u.FineTunesPage}(p=t.OpenAI||(t.OpenAI={})),(t=e.exports=p).default=p},7866:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CursorPage=t.Page=void 0;const n=r(4610);class o extends n.AbstractPage{constructor(e,t,r,n){super(e,t,r,n),this.object=r.object,this.data=r.data}getPaginatedItems(){return this.data}nextPageParams(){return null}nextPageInfo(){return null}}t.Page=o;class i extends n.AbstractPage{constructor(e,t,r,n){super(e,t,r,n),this.data=r.data}getPaginatedItems(){return this.data}nextPageParams(){const e=this.nextPageInfo();if(!e)return null;if("params"in e)return e.params;const t=Object.fromEntries(e.url.searchParams);return Object.keys(t).length?t:null}nextPageInfo(){var e,t;if(!(null===(e=this.data)||void 0===e?void 0:e.length))return null;const r=null===(t=this.data[this.data.length-1])||void 0===t?void 0:t.id;return r?{params:{after:r}}:null}}t.CursorPage=i},4474:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.APIResource=void 0,t.APIResource=class{constructor(e){this.client=e,this.get=e.get.bind(e),this.post=e.post.bind(e),this.patch=e.patch.bind(e),this.put=e.put.bind(e),this.delete=e.delete.bind(e),this.getAPIList=e.getAPIList.bind(e)}}},5167:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Audio=void 0;const s=r(4474),a=r(1130),c=r(228),u=i(r(9137));class l extends s.APIResource{constructor(){super(...arguments),this.transcriptions=new a.Transcriptions(this.client),this.translations=new c.Translations(this.client)}}t.Audio=l,function(e){e.Transcriptions=u.Transcriptions,e.Translations=u.Translations}(l=t.Audio||(t.Audio={}))},9137:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Translations=t.Transcriptions=t.Audio=void 0;var n=r(5167);Object.defineProperty(t,"Audio",{enumerable:!0,get:function(){return n.Audio}});var o=r(1130);Object.defineProperty(t,"Transcriptions",{enumerable:!0,get:function(){return o.Transcriptions}});var i=r(228);Object.defineProperty(t,"Translations",{enumerable:!0,get:function(){return i.Translations}})},1130:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Transcriptions=void 0;const n=r(4474),o=r(4610);class i extends n.APIResource{create(e,t){return this.post("/audio/transcriptions",(0,o.multipartFormRequestOptions)({body:e,...t}))}}t.Transcriptions=i,i=t.Transcriptions||(t.Transcriptions={})},228:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Translations=void 0;const n=r(4474),o=r(4610);class i extends n.APIResource{create(e,t){return this.post("/audio/translations",(0,o.multipartFormRequestOptions)({body:e,...t}))}}t.Translations=i,i=t.Translations||(t.Translations={})},657:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Chat=void 0;const s=r(4474),a=r(821),c=i(r(896));class u extends s.APIResource{constructor(){super(...arguments),this.completions=new a.Completions(this.client)}}t.Chat=u,function(e){e.Completions=c.Completions}(u=t.Chat||(t.Chat={}))},821:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Completions=void 0;const n=r(4474);class o extends n.APIResource{create(e,t){var r;return this.post("/chat/completions",{body:e,...t,stream:null!==(r=e.stream)&&void 0!==r&&r})}}t.Completions=o,o=t.Completions||(t.Completions={})},896:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Completions=t.Chat=void 0;var n=r(657);Object.defineProperty(t,"Chat",{enumerable:!0,get:function(){return n.Chat}});var o=r(821);Object.defineProperty(t,"Completions",{enumerable:!0,get:function(){return o.Completions}})},8415:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Completions=void 0;const n=r(4474);class o extends n.APIResource{create(e,t){var r;return this.post("/completions",{body:e,...t,stream:null!==(r=e.stream)&&void 0!==r&&r})}}t.Completions=o,o=t.Completions||(t.Completions={})},6217:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Edits=void 0;const n=r(4474);class o extends n.APIResource{create(e,t){return this.post("/edits",{body:e,...t})}}t.Edits=o,o=t.Edits||(t.Edits={})},3275:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Embeddings=void 0;const n=r(4474);class o extends n.APIResource{create(e,t){return this.post("/embeddings",{body:e,...t})}}t.Embeddings=o,o=t.Embeddings||(t.Embeddings={})},7890:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileObjectsPage=t.Files=void 0;const n=r(4474),o=r(4610),i=r(7866);class s extends n.APIResource{create(e,t){return this.post("/files",(0,o.multipartFormRequestOptions)({body:e,...t}))}retrieve(e,t){return this.get(`/files/${e}`,t)}list(e){return this.getAPIList("/files",a,e)}del(e,t){return this.delete(`/files/${e}`,t)}retrieveContent(e,t){return this.get(`/files/${e}/content`,{...t,headers:{Accept:"application/json",...null==t?void 0:t.headers}})}}t.Files=s;class a extends i.Page{}t.FileObjectsPage=a,s=t.Files||(t.Files={})},4750:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FineTunesPage=t.FineTunes=void 0;const n=r(4474),o=r(7866);class i extends n.APIResource{create(e,t){return this.post("/fine-tunes",{body:e,...t})}retrieve(e,t){return this.get(`/fine-tunes/${e}`,t)}list(e){return this.getAPIList("/fine-tunes",s,e)}cancel(e,t){return this.post(`/fine-tunes/${e}/cancel`,t)}listEvents(e,t,r){var n;return this.get(`/fine-tunes/${e}/events`,{query:t,timeout:864e5,...r,stream:null!==(n=null==t?void 0:t.stream)&&void 0!==n&&n})}}t.FineTunes=i;class s extends o.Page{}t.FineTunesPage=s,i=t.FineTunes||(t.FineTunes={})},9001:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var o=Object.getOwnPropertyDescriptor(t,r);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,o)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)"default"!==r&&Object.prototype.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.FineTuning=void 0;const s=r(4474),a=r(3394),c=i(r(9977));class u extends s.APIResource{constructor(){super(...arguments),this.jobs=new a.Jobs(this.client)}}t.FineTuning=u,function(e){e.Jobs=c.Jobs,e.FineTuningJobsPage=c.FineTuningJobsPage,e.FineTuningJobEventsPage=c.FineTuningJobEventsPage}(u=t.FineTuning||(t.FineTuning={}))},9977:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Jobs=t.FineTuningJobEventsPage=t.FineTuningJobsPage=t.FineTuning=void 0;var n=r(9001);Object.defineProperty(t,"FineTuning",{enumerable:!0,get:function(){return n.FineTuning}});var o=r(3394);Object.defineProperty(t,"FineTuningJobsPage",{enumerable:!0,get:function(){return o.FineTuningJobsPage}}),Object.defineProperty(t,"FineTuningJobEventsPage",{enumerable:!0,get:function(){return o.FineTuningJobEventsPage}}),Object.defineProperty(t,"Jobs",{enumerable:!0,get:function(){return o.Jobs}})},3394:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FineTuningJobEventsPage=t.FineTuningJobsPage=t.Jobs=void 0;const n=r(4474),o=r(4610),i=r(7866);class s extends n.APIResource{create(e,t){return this.post("/fine_tuning/jobs",{body:e,...t})}retrieve(e,t){return this.get(`/fine_tuning/jobs/${e}`,t)}list(e={},t){return(0,o.isRequestOptions)(e)?this.list({},e):this.getAPIList("/fine_tuning/jobs",a,{query:e,...t})}cancel(e,t){return this.post(`/fine_tuning/jobs/${e}/cancel`,t)}listEvents(e,t={},r){return(0,o.isRequestOptions)(t)?this.listEvents(e,{},t):this.getAPIList(`/fine_tuning/jobs/${e}/events`,c,{query:t,...r})}}t.Jobs=s;class a extends i.CursorPage{}t.FineTuningJobsPage=a;class c extends i.CursorPage{}t.FineTuningJobEventsPage=c,s=t.Jobs||(t.Jobs={})},789:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Images=void 0;const n=r(4474),o=r(4610);class i extends n.APIResource{createVariation(e,t){return this.post("/images/variations",(0,o.multipartFormRequestOptions)({body:e,...t}))}edit(e,t){return this.post("/images/edits",(0,o.multipartFormRequestOptions)({body:e,...t}))}generate(e,t){return this.post("/images/generations",{body:e,...t})}}t.Images=i,i=t.Images||(t.Images={})},1739:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Moderations=t.Models=t.ModelsPage=t.Images=t.FineTuning=t.FineTunes=t.FineTunesPage=t.Files=t.FileObjectsPage=t.Edits=t.Embeddings=t.Completions=t.Chat=t.Audio=void 0;var n=r(5167);Object.defineProperty(t,"Audio",{enumerable:!0,get:function(){return n.Audio}});var o=r(657);Object.defineProperty(t,"Chat",{enumerable:!0,get:function(){return o.Chat}});var i=r(8415);Object.defineProperty(t,"Completions",{enumerable:!0,get:function(){return i.Completions}});var s=r(3275);Object.defineProperty(t,"Embeddings",{enumerable:!0,get:function(){return s.Embeddings}});var a=r(6217);Object.defineProperty(t,"Edits",{enumerable:!0,get:function(){return a.Edits}});var c=r(7890);Object.defineProperty(t,"FileObjectsPage",{enumerable:!0,get:function(){return c.FileObjectsPage}}),Object.defineProperty(t,"Files",{enumerable:!0,get:function(){return c.Files}});var u=r(4750);Object.defineProperty(t,"FineTunesPage",{enumerable:!0,get:function(){return u.FineTunesPage}}),Object.defineProperty(t,"FineTunes",{enumerable:!0,get:function(){return u.FineTunes}});var l=r(9001);Object.defineProperty(t,"FineTuning",{enumerable:!0,get:function(){return l.FineTuning}});var d=r(789);Object.defineProperty(t,"Images",{enumerable:!0,get:function(){return d.Images}});var p=r(8461);Object.defineProperty(t,"ModelsPage",{enumerable:!0,get:function(){return p.ModelsPage}}),Object.defineProperty(t,"Models",{enumerable:!0,get:function(){return p.Models}});var g=r(1573);Object.defineProperty(t,"Moderations",{enumerable:!0,get:function(){return g.Moderations}})},8461:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModelsPage=t.Models=void 0;const n=r(4474),o=r(7866);class i extends n.APIResource{retrieve(e,t){return this.get(`/models/${e}`,t)}list(e){return this.getAPIList("/models",s,e)}del(e,t){return this.delete(`/models/${e}`,t)}}t.Models=i;class s extends o.Page{}t.ModelsPage=s,i=t.Models||(t.Models={})},1573:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Moderations=void 0;const n=r(4474);class o extends n.APIResource{create(e,t){return this.post("/moderations",{body:e,...t})}}t.Moderations=o,o=t.Moderations||(t.Moderations={})},7785:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Stream=void 0;class r{constructor(e,t){this.response=e,this.controller=t,this.decoder=new n}async*iterMessages(){if(!this.response.body)throw this.controller.abort(),new Error("Attempted to iterate over a response with no body");const e=new o,t=function(e){if(e[Symbol.asyncIterator])return e;const t=e.getReader();return{async next(){try{const e=await t.read();return(null==e?void 0:e.done)&&t.releaseLock(),e}catch(e){throw t.releaseLock(),e}},async return(){const e=t.cancel();return t.releaseLock(),await e,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}(this.response.body);for await(const r of t)for(const t of e.decode(r)){const e=this.decoder.decode(t);e&&(yield e)}for(const t of e.flush()){const e=this.decoder.decode(t);e&&(yield e)}}async*[Symbol.asyncIterator](){let e=!1;try{for await(const t of this.iterMessages())if(!e)if(t.data.startsWith("[DONE]"))e=!0;else if(null===t.event)try{yield JSON.parse(t.data)}catch(e){throw console.error("Could not parse message into JSON:",t.data),console.error("From chunk:",t.raw),e}e=!0}catch(e){if(e instanceof Error&&"AbortError"===e.name)return;throw e}finally{e||this.controller.abort()}}}t.Stream=r;class n{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(e){if(e.endsWith("\r")&&(e=e.substring(0,e.length-1)),!e){if(!this.event&&!this.data.length)return null;const e={event:this.event,data:this.data.join("\n"),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],e}if(this.chunks.push(e),e.startsWith(":"))return null;let[t,r,n]=function(e,t){const r=e.indexOf(":");return-1!==r?[e.substring(0,r),":",e.substring(r+1)]:[e,"",""]}(e);return n.startsWith(" ")&&(n=n.substring(1)),"event"===t?this.event=n:"data"===t&&this.data.push(n),null}}class o{constructor(){this.buffer=[],this.trailingCR=!1}decode(e){let t=this.decodeText(e);if(this.trailingCR&&(t="\r"+t,this.trailingCR=!1),t.endsWith("\r")&&(this.trailingCR=!0,t=t.slice(0,-1)),!t)return[];const r=o.NEWLINE_CHARS.has(t[t.length-1]||"");let n=t.split(o.NEWLINE_REGEXP);return 1!==n.length||r?(this.buffer.length>0&&(n=[this.buffer.join("")+n[0],...n.slice(1)],this.buffer=[]),r||(this.buffer=[n.pop()||""]),n):(this.buffer.push(n[0]),[])}decodeText(e){var t;if(null==e)return"";if("string"==typeof e)return e;if("undefined"!=typeof Buffer){if(e instanceof Buffer)return e.toString();if(e instanceof Uint8Array)return Buffer.from(e).toString();throw new Error(`Unexpected: received non-Uint8Array (${e.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`)}if("undefined"!=typeof TextDecoder){if(e instanceof Uint8Array||e instanceof ArrayBuffer)return null!==(t=this.textDecoder)&&void 0!==t||(this.textDecoder=new TextDecoder("utf8")),this.textDecoder.decode(e);throw new Error(`Unexpected: received non-Uint8Array/ArrayBuffer (${e.constructor.name}) in a web platform. Please report this error.`)}throw new Error("Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.")}flush(){if(!this.buffer.length&&!this.trailingCR)return[];const e=[this.buffer.join("")];return this.buffer=[],this.trailingCR=!1,e}}o.NEWLINE_CHARS=new Set(["\n","\r","\v","\f","","","","","\u2028","\u2029"]),o.NEWLINE_REGEXP=/\r\n|[\n\r\x0b\x0c\x1c\x1d\x1e\x85\u2028\u2029]/g},3780:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createForm=t.multipartFormRequestOptions=t.maybeMultipartFormRequestOptions=t.isMultipartBody=t.MultipartBody=t.toFile=t.isUploadable=t.isBlobLike=t.isFileLike=t.isResponseLike=t.fileFromPath=void 0;const n=r(4273),o=r(4169),i=r(9948);Object.defineProperty(t,"fileFromPath",{enumerable:!0,get:function(){return i.fileFromPath}});const s=r(5905);async function a(e,r,o={}){var i,s,a;if(e=await e,(0,t.isResponseLike)(e)){const t=await e.blob();return r||(r=null!==(i=new URL(e.url).pathname.split(/[\\/]/).pop())&&void 0!==i?i:"unknown_file"),new n.File([t],r,o)}const l=await async function(e){var r;let n=[];if("string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer)n.push(e);else if((0,t.isBlobLike)(e))n.push(await e.arrayBuffer());else{if(!u(e))throw new Error(`Unexpected data type: ${typeof e}; constructor: ${null===(r=null==e?void 0:e.constructor)||void 0===r?void 0:r.name}; props: ${function(e){return`[${Object.getOwnPropertyNames(e).map((e=>`"${e}"`)).join(", ")}]`}(e)}`);for await(const t of e)n.push(t)}return n}(e);if(r||(r=null!==(s=function(e){var t;return c(e.name)||c(e.filename)||(null===(t=c(e.path))||void 0===t?void 0:t.split(/[\\/]/).pop())}(e))&&void 0!==s?s:"unknown_file"),!o.type){const e=null===(a=l[0])||void 0===a?void 0:a.type;"string"==typeof e&&(o={...o,type:e})}return new n.File(l,r,o)}t.isResponseLike=e=>null!=e&&"object"==typeof e&&"string"==typeof e.url&&"function"==typeof e.blob,t.isFileLike=e=>null!=e&&"object"==typeof e&&"string"==typeof e.name&&"number"==typeof e.lastModified&&(0,t.isBlobLike)(e),t.isBlobLike=e=>null!=e&&"object"==typeof e&&"number"==typeof e.size&&"string"==typeof e.type&&"function"==typeof e.text&&"function"==typeof e.slice&&"function"==typeof e.arrayBuffer,t.isUploadable=e=>(0,t.isFileLike)(e)||(0,t.isResponseLike)(e)||(0,s.isFsReadStream)(e),t.toFile=a;const c=e=>"string"==typeof e?e:"undefined"!=typeof Buffer&&e instanceof Buffer?String(e):void 0,u=e=>null!=e&&"object"==typeof e&&"function"==typeof e[Symbol.asyncIterator];class l{constructor(e){this.body=e}get[Symbol.toStringTag](){return"MultipartBody"}}t.MultipartBody=l,t.isMultipartBody=e=>e&&"object"==typeof e&&e.body&&"MultipartBody"===e[Symbol.toStringTag],t.maybeMultipartFormRequestOptions=async e=>{if(!d(e.body))return e;const r=await(0,t.createForm)(e.body);return(0,o.getMultipartRequestOptions)(r,e)},t.multipartFormRequestOptions=async e=>{const r=await(0,t.createForm)(e.body);return(0,o.getMultipartRequestOptions)(r,e)},t.createForm=async e=>{const t=new n.FormData;return await Promise.all(Object.entries(e||{}).map((([e,r])=>p(t,e,r)))),t};const d=e=>{if((0,t.isUploadable)(e))return!0;if(Array.isArray(e))return e.some(d);if(e&&"object"==typeof e)for(const t in e)if(d(e[t]))return!0;return!1},p=async(e,r,n)=>{if(void 0!==n){if(null==n)throw new TypeError(`Received null for "${r}"; to pass null in FormData, you must use the string 'null'`);if("string"==typeof n||"number"==typeof n||"boolean"==typeof n)e.append(r,String(n));else if((0,t.isUploadable)(n)){const t=await a(n);e.append(r,t)}else if(Array.isArray(n))await Promise.all(n.map((t=>p(e,r+"[]",t))));else{if("object"!=typeof n)throw new TypeError(`Invalid value given to form, expected a string, number, boolean, object, Array, File or Blob but got ${n} instead`);await Promise.all(Object.entries(n).map((([t,n])=>p(e,`${r}[${t}]`,n))))}}}},3282:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VERSION=void 0,t.VERSION="4.4.0"}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={id:n,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nc=void 0,(()=>{"use strict";const e=r(121),t=r(8858),n=r(4258),o=r(1289),i=r(6389),s=r(8992),a=r(605),c=r(6316),u=r(8463),l=r(5320),d=r(6784),p=r(7219);r(4404),async function(){const r=new a.LocalStorageService("settings"),i=(await r.load()).data?.extensionLanguage||c.ExtensionLanguage.ENGLISH;(0,u.applyTranslations)(l.translations,i);const g=new o.PageElementService(e.ExtentionSelector.pageState);let f=await n.BackgroundSript.run((()=>"complete"===document.readyState));for(;!f;)f=await n.BackgroundSript.run((()=>(console.log("Ожидание загрузки станицы"),"complete"===document.readyState)));if(g.hide(!0),!await(0,d.isYouTubePage)())return new o.PageElementService(e.ExtentionSelector.pageError).hide(!1),null;const h=new o.PageElementService(e.ExtentionSelector.info);h.hide(!1),await n.BackgroundSript.run(t.getSubYouTube),h.hide(!0),new o.PageElementService(e.ExtentionSelector.button).addEvent(p.buttonAction);const y=new o.PageElementService(e.ExtentionSelector.startMessage);await(0,s.firstInitialization)(r)&&y.hide(!1)}(),(0,i.settingsInit)()})()})();